---
# Generated By: Cursor (Claude Sonnet 4)
# Main playbook for VM workstation setup
# Usage: ansible-playbook -i localhost, -c local site.yml

- name: VM Workstation Setup
  hosts: localhost
  connection: local
  gather_facts: true

  vars_files:
    - group_vars/all.yml

  pre_tasks:
    - name: Ensure we're running on a supported distribution
      ansible.builtin.assert:
        that:
          - ansible_os_family == "RedHat"
        fail_msg: "This playbook is designed for Red Hat family distributions (Fedora, RHEL, CentOS)"

  roles:
    - role: packages
      tags: packages
    - role: files
      tags: files
    - role: git
      tags: git
    - role: system_config
      tags: system_config
    - role: ssh
      tags: ssh
    - role: nomachine
      tags: nomachine
    - role: cursor
      tags: cursor

  post_tasks:
    - name: Display setup completion message
      ansible.builtin.debug:
        msg: |
          =====================================
          VM Workstation Setup Complete!
          =====================================

          Manual steps remaining:
          1. Install GNOME Extensions via browser:
             - https://extensions.gnome.org/extension/7855/dash-in-panel/
             - https://extensions.gnome.org/extension/258/notifications-alert-on-user-menu/
             - https://extensions.gnome.org/extension/3010/system-monitor-next/

          2. Configure System Monitor Next extension:
             - CPU: Show Text = false, Graph Width = 50
             - Memory: Show Text = false, Graph Width = 50
             - Net: Show Text = false, Graph Width = 50

          3. Logout and login again to apply all settings

          =====================================
