# VM Workstation Setup Ansible Playbook
<!-- Generated By: Cursor (Claude Sonnet 4) -->

## Overview
Automated VM workstation setup using Ansible. Installs packages, deploys dotfiles, and configures system settings for optimal remote access.

## Requirements
- Fedora/RHEL/CentOS VM (Red Hat family)
- Ansible installed (`sudo dnf install ansible`)
- Root/sudo access
- Internet connection for package downloads

## Quick Start

1. **Clone this repository on the VM:**
   ```bash
   git clone <repository-url>
   cd workstation-setup/ansible
   ```

2. **Run the complete setup:**
   ```bash
   ansible-playbook -i localhost, -c local site.yml --ask-become-pass
   ```

3. **Or run specific components:**
   ```bash
   # Packages only
   ansible-playbook -i localhost, -c local site.yml --tags packages --ask-become-pass
   
   # Dotfiles only  
   ansible-playbook -i localhost, -c local site.yml --tags dotfiles --ask-become-pass
   
   # System configuration only
   ansible-playbook -i localhost, -c local site.yml --tags system-config --ask-become-pass
   ```

## What Gets Installed

### Packages
- **Essential tools**: python3, git, vim, screen, curl, wget
- **Development**: golang, meld, tig
- **Cursor**: AI-powered code editor (AppImage)

### Dotfiles Deployed
- `.bashrc` - Custom bash configuration with Go environment
- `.bashrc_prompt` - Color prompt configuration
- `.vimrc` - Vim editor configuration with Ruby/YAML support
- `.screenrc` - GNU Screen configuration
- `.gitconfig` - Git configuration with meld diff tool

### System Configuration
- **Screen lock disabled** - Prevents VM from locking during remote sessions
- **Idle activation disabled** - Keeps VM active
- **Suspend disabled** - Prevents automatic sleep

## Manual Steps Required

After running the playbook, manually install GNOME extensions:

1. **Install via browser:**
   - [Dash in Panel](https://extensions.gnome.org/extension/7855/dash-in-panel/)
   - [Notifications Alert](https://extensions.gnome.org/extension/258/notifications-alert-on-user-menu/)
   - [System Monitor Next](https://extensions.gnome.org/extension/3010/system-monitor-next/)

2. **Configure System Monitor Next:**
   - CPU: Show Text = false, Graph Width = 50
   - Memory: Show Text = false, Graph Width = 50  
   - Net: Show Text = false, Graph Width = 50

3. **Logout and login** to apply all settings

## File Structure
```
ansible/
├── site.yml                    # Main playbook
├── group_vars/all.yml          # Configuration variables
└── roles/
    ├── packages/tasks/main.yml     # Package installation
    ├── dotfiles/                   # Dotfile deployment
    │   ├── tasks/main.yml
    │   └── files/                  # Source dotfiles (no dot prefix)
    │       ├── bashrc
    │       ├── bashrc_prompt
    │       ├── vimrc
    │       ├── screenrc
    │       └── gitconfig
    └── system-config/tasks/main.yml # System settings
```

## Customization

Edit `group_vars/all.yml` to customize:
- Package lists
- Cursor installation method
- File permissions
- Extension URLs

## Validation

The playbook includes validation checks:
- ✅ Package installation verification
- ✅ Dotfile dependency validation
- ✅ GNOME extension status reporting
- ✅ File deployment confirmation

## Troubleshooting

**Permission errors:**
```bash
# Ensure you have sudo access
sudo -v
```

**GNOME not detected:**
- Playbook will skip GNOME settings on non-GNOME systems
- Manual `gsettings` commands may be needed

**Go environment issues:**
- Logout/login after installation to refresh environment
- Check with: `go version`

**Cursor not launching:**
- Verify AppImage permissions: `ls -la /opt/cursor/`
- Try: `/opt/cursor/cursor.AppImage` 